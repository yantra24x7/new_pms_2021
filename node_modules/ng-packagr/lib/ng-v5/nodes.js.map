{"version":3,"file":"nodes.js","sourceRoot":"","sources":["../../../src/lib/ng-v5/nodes.ts"],"names":[],"mappings":"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","sourcesContent":["import * as ts from 'typescript';\nimport { Node } from '../brocc/node';\nimport { by, isInProgress, isDirty } from '../brocc/select';\nimport { NgEntryPoint } from '../ng-package-format/entry-point';\nimport { NgPackage } from '../ng-package-format/package';\nimport { TsConfig } from '../ts/tsconfig';\nimport { DestinationFiles } from '../ng-package-format/shared';\n\nexport const TYPE_NG_PACKAGE = 'application/ng-package';\nexport const TYPE_NG_ENTRY_POINT = 'application/ng-entry-point';\nexport const TYPE_STYLESHEET = 'text/css';\nexport const TYPE_TEMPLATE = 'text/html';\nexport const TYPE_TS_SOURCES = 'application/ts';\n\n/** A node that can be read through the `fs` api. */\nexport const URL_PROTOCOL_FILE = 'file://';\n\n/** A node that can be read through the `ts` compiler api. */\nexport const URL_PROTOCOL_TS = 'ts://';\n\n/** A node specific to angular. */\nexport const URL_PROTOCOL_NG = 'ng://';\n\nexport function isEntryPoint(node: Node): node is EntryPointNode {\n  return node.type === TYPE_NG_ENTRY_POINT;\n}\n\nexport function isPackage(node: Node): node is PackageNode {\n  return node.type === TYPE_NG_PACKAGE;\n}\n\nexport function isStylesheet(node: Node): node is StylesheetNode {\n  return node.type === TYPE_STYLESHEET;\n}\n\nexport function isTemplate(node: Node): node is TemplateNode {\n  return node.type === TYPE_TEMPLATE;\n}\n\nexport function isTypeScriptSources(node: Node): node is TypeScriptSourceNode {\n  return node.type === TYPE_TS_SOURCES;\n}\n\nexport function byEntryPoint() {\n  return by(isEntryPoint);\n}\n\nexport function isEntryPointInProgress() {\n  return by(isEntryPoint).and(isInProgress);\n}\n\nexport function isEntryPointDirty() {\n  return by(isEntryPoint).and(isDirty);\n}\n\nexport function isFileUrl(value: string): boolean {\n  return value.startsWith(URL_PROTOCOL_FILE);\n}\n\nexport function fileUrl(path: string): string {\n  return `${URL_PROTOCOL_FILE}${path}`;\n}\n\nexport function fileUrlPath(url: string): string {\n  if (url.startsWith(URL_PROTOCOL_FILE)) {\n    return url.substring(URL_PROTOCOL_FILE.length);\n  }\n}\n\nexport function ngUrl(path: string): string {\n  return `${URL_PROTOCOL_NG}${path}`;\n}\n\nexport function isTsUrl(value: string): boolean {\n  return value.startsWith(URL_PROTOCOL_TS);\n}\n\nexport function tsUrl(path: string): string {\n  return `${URL_PROTOCOL_TS}${path}`;\n}\n\nexport class EntryPointNode extends Node {\n  public readonly type = TYPE_NG_ENTRY_POINT;\n\n  data: {\n    destinationFiles: DestinationFiles;\n    entryPoint: NgEntryPoint;\n    tsConfig?: TsConfig;\n  };\n}\n\nexport class PackageNode extends Node {\n  public readonly type = TYPE_NG_PACKAGE;\n\n  data: NgPackage;\n}\n\nexport class StylesheetNode extends Node {\n  public readonly type = TYPE_STYLESHEET;\n\n  data: { content?: string };\n}\n\nexport class TemplateNode extends Node {\n  public readonly type = TYPE_TEMPLATE;\n\n  data: { content?: string };\n}\n\nexport class TypeScriptSourceNode extends Node {\n  public readonly type = TYPE_TS_SOURCES;\n\n  data: ts.TransformationResult<ts.SourceFile>;\n}\n"]}